---
apiVersion: "kind.x-k8s.io/v1alpha4"
kind: Cluster
name: local
nodes:
  - role: control-plane
  - role: worker
  - role: worker
networking:
  disableDefaultCNI: true
  serviceSubnet: "10.12.0.0/16"
  podSubnet: "10.112.0.0/16"
containerdConfigPatches:
  - |-
    {%- for registry in registries %}
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."{{ registry }}"]
      endpoint = ["http://registry-{{ registry }}:5000"]
    [plugins."io.containerd.grpc.v1.cri".registry.configs."{{ registry }}".tls]
      insecure_skip_verify = true
    {%- endfor %}
